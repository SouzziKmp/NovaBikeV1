<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

    <head th:fragment="head">
        <title>Nova Bike Shop</title>
        <meta charset="UTF-8"/>

        <link th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>
        <link th:href="@{/webjars/font-awesome/css/all.css}" rel="stylesheet"/>
        <link th:href="@{/css/estilos.css}" rel="stylesheet"/>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

            <script th:src="@{/webjars/jquery/jquery.min.js}"></script>
            <script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
            <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
    </head>

    <body class="d-flex flex-column min-vh-100">

        <!-- HEADER -->
        <header th:fragment="header" class="header">
            <nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #730202;">
                <div class="container">

                    <a th:href="@{/}" class="navbar-brand">
                        Nova Bikes<br>Shop
                    </a>

                    <button class="navbar-toggler" data-bs-toggle="collapse"
                            data-bs-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarCollapse">

                        <!-- MENÚ IZQUIERDO -->
                        <ul class="navbar-nav">

                            <!-- Inicio: todos -->
                            <li class="nav-item px-2">
                                <a class="nav-link" th:href="@{/}">Inicio</a>
                            </li>

                            <!-- Listado: USER, VENDEDOR, ADMIN -->
                            <li class="nav-item px-2"
                                sec:authorize="hasAnyRole('USER','VENDEDOR','ADMIN')">
                                <a class="nav-link" th:href="@{/producto/listado}">
                                    Listado
                                </a>
                            </li>

                            <!-- Agregar: VENDEDOR y ADMIN -->
                            <li class="nav-item px-2"
                                sec:authorize="hasAnyRole('VENDEDOR','ADMIN')">
                                <a class="nav-link" th:href="@{/producto/agregar}">
                                    Agregar
                                </a>
                            </li>

                            <!-- Destacados: USER, VENDEDOR, ADMIN -->
                            <li class="nav-item px-2"
                                sec:authorize="hasAnyRole('USER','VENDEDOR','ADMIN')">
                                <a class="nav-link" th:href="@{/producto/destacados}">
                                    Destacados
                                </a>
                            </li>

                            <!-- Reporte Stock: VENDEDOR y ADMIN -->
                            <li class="nav-item px-2"
                                sec:authorize="hasAnyRole('VENDEDOR','ADMIN')">
                                <a class="nav-link" th:href="@{/producto/reporte}">
                                    Reporte Stock
                                </a>
                            </li>

                        </ul>

                        <!-- MENÚ DERECHO -->
                        <ul class="navbar-nav ms-auto">

                            <!-- LOGIN: solo NO autenticado -->
                            <li class="nav-item ms-2"
                                sec:authorize="!isAuthenticated()">
                                <a class="btn btn-outline-light" th:href="@{/login}">
                                    Log In
                                </a>
                            </li>

                            <!-- LOGOUT: solo autenticado -->
                            <li class="nav-item ms-2"
                                sec:authorize="isAuthenticated()">
                                <form th:action="@{/logout}" method="post">
                                    <button type="submit"
                                            class="btn btn-outline-warning">
                                        Logout
                                    </button>
                                </form>
                            </li>

                        </ul>

                    </div>
                </div>
            </nav>
        </header>

        <!-- FOOTER -->
        <footer th:fragment="footer"
                class="p-2 bg-dark text-white text-center mt-auto">
            <p class="lead mb-0">Nova Bikes Shop &COPY;</p>
        </footer>

    </body>
</html>